{"index":{"title":"it's me","links":[],"tags":[],"content":"hey there!\n","richContent":"&lt;p&gt;hey there!&lt;/p&gt;\n&lt;p&gt;&lt;img src=&quot;./public-media/me.jpeg&quot; width=&quot;400&quot; height=&quot;auto&quot; alt=&quot;&quot;&gt;&lt;/p&gt;"},"interests/transit/nyc/R211T":{"title":"R211T","links":[],"tags":[],"content":"i managed to catch a ride on one of the MTA’s fancy new trains with open gangways!\n\n\nthey were quite snazzy and functional—i saw many people standing in the gangway while it was more crowded and rode just fine in it myself.\nbesides the open gangways, the most useful improvement i saw was the intricate wayfinding information displayed at each stop: where to find which staircases/elevators relative to one’s position. this convinced me that replacing the LED textual stop information with general purpose screens really is worth it.\n\ni saw these odd devices next to two of the doors (one on each side) on each car:\n\ni really could not figure out what their purpose is, even after searching online. if you have any idea, please let me know!\nhopefully they figure out a way to inspect between the cars so that it can run on the A as well.","richContent":"&lt;p&gt;i managed to catch a ride on one of the MTA’s fancy new trains with open gangways!\n&lt;img src=&quot;../../../public-media/trains/18A690FC-BF82-4D98-BD80-02BA5E0EFD55_1_105_c.jpeg&quot; width=&quot;400&quot; height=&quot;auto&quot; alt=&quot;&quot;&gt;\n&lt;img src=&quot;../../../public-media/trains/B92193B0-62FB-4974-BF28-BE17412ACA32_1_105_c.jpeg&quot; width=&quot;400&quot; height=&quot;auto&quot; alt=&quot;&quot;&gt;&lt;/p&gt;\n&lt;p&gt;they were quite snazzy and functional—i saw many people standing in the gangway while it was more crowded and rode just fine in it myself.&lt;/p&gt;\n&lt;p&gt;besides the open gangways, the most useful improvement i saw was the intricate wayfinding information displayed at each stop: where to find which staircases/elevators relative to one’s position. this convinced me that replacing the LED textual stop information with general purpose screens really is worth it.\n&lt;img src=&quot;../../../public-media/trains/11C79703-E128-4B9F-8EFE-571294A4C30F_1_105_c.jpeg&quot; width=&quot;400&quot; height=&quot;auto&quot; alt=&quot;&quot;&gt;&lt;/p&gt;\n&lt;p&gt;i saw these odd devices next to two of the doors (one on each side) on each car:\n&lt;img src=&quot;../../../public-media/trains/73E74488-A893-40CC-BDC3-2028C2A8E544_1_105_c.jpeg&quot; width=&quot;300&quot; height=&quot;auto&quot; alt=&quot;&quot;&gt;&lt;/p&gt;\n&lt;p&gt;i really could not figure out what their purpose is, even after searching online. if you have any idea, please let me know!&lt;/p&gt;\n&lt;p&gt;hopefully they figure out a way to inspect between the cars &lt;a href=&quot;https://gothamist.com/news/mtas-fancy-new-open-gangway-subway-trains-cant-run-on-express-tracks-per-memo&quot; class=&quot;external&quot;&gt;so that it can run on the A as well&lt;svg aria-hidden=&quot;true&quot; class=&quot;external-icon&quot; viewBox=&quot;0 0 512 512&quot;&gt;&lt;path d=&quot;M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;.&lt;/p&gt;"},"posts/distance-audio-modulator":{"title":"distance audio modulator","links":[],"tags":[],"content":"recently, my friend zero told me an idea it had to add some crowd-mediated interactivity to a live show: measure how close together a particular few people are by looking at bluetooth signal strengths, then report that back to the synth to modulate some parameters.\nwe whittled that down to a simpler starting place: estimate distances to a few devices directly from the central laptop, then emit some midi CC values based on that. with some trial and error, we got that to work! here’s a little demo video:\n\nit’s pretty inconsistent and high latency, as you can tell. i bet if we wrote a little app that sent out bluetooth pings every 25ms we could probably address those, though of course with some tradeoff between the two.\nhere’s the python script we wrote:\nimport asyncio\nimport hashlib\n \nimport ipdb\nfrom bleak import BleakScanner\nimport mido\n \n \nNUM_CCS = 8\nBASE_CC = 70\n \nMIN_RSSI = 0x30\nMAX_RSSI = 0x60\n \ndef clamp(lo, hi, x):\n    if x &lt; lo:\n        return lo\n    elif x &gt; hi:\n        return hi\n    else:\n        return x\n \ndef scale(from_lo, from_hi, to_lo, to_hi, x):\n    return (clamp(from_lo, from_hi, x) - from_lo) / (from_hi - from_lo) * (to_hi - to_lo) + to_lo\n \ndef rssi_to_midi(rssi):\n    return round(scale(MIN_RSSI, MAX_RSSI, 0, 127, abs(rssi)))\n \ndef valid_ad(dev, ad):\n    return dev.name is not None and \\\n           dev.name.startswith(&#039;Jessie&#039;) and \\\n           ad.rssi is not None and \\\n           (ad.tx_power is None or ad.tx_power &lt; 50)\n \ndef update_cc(port, cc, val):\n    port.send(mido.Message(&#039;control_change&#039;, control=cc, value=val))\n \nasync def main():\n    port = mido.open_output()\n    cc_nums = {}\n    async with BleakScanner() as scanner:\n        async for bd, ad in scanner.advertisement_data():\n            if not valid_ad(bd, ad):\n                continue\n            if bd.address not in cc_nums:\n                if len(cc_nums) &lt; NUM_CCS:\n                    cc_nums[bd.address] = BASE_CC + len(cc_nums)\n                else:\n                    continue\n \n            val = rssi_to_midi(ad.rssi - (ad.tx_power or 8))\n            print(f&quot;{bd.name} -&gt; {val}&quot;)\n            update_cc(port, cc_nums[bd.address], val)\n \n \nif __name__ == &#039;__main__&#039;:\n    asyncio.run(main())\nif i/we work on it any more, i’ll put it in a repo somewhere","richContent":"&lt;p&gt;recently, my friend zero told me an idea it had to add some crowd-mediated interactivity to a live show: measure how close together a particular few people are by looking at bluetooth signal strengths, then report that back to the synth to modulate some parameters.&lt;/p&gt;\n&lt;p&gt;we whittled that down to a simpler starting place: estimate distances to a few devices directly from the central laptop, then emit some midi CC values based on that. with some trial and error, we got that to work! here’s a little demo video:\n&lt;video src=&quot;../public-media/midi_rssi_example.mov&quot; controls&gt;&lt;/video&gt;\nit’s pretty inconsistent and high latency, as you can tell. i bet if we wrote a little app that sent out bluetooth pings every 25ms we could probably address those, though of course with some tradeoff between the two.&lt;/p&gt;\n&lt;p&gt;here’s the python script we wrote:&lt;/p&gt;\n&lt;figure data-rehype-pretty-code-figure=&quot;&quot;&gt;&lt;pre tabindex=&quot;0&quot; data-language=&quot;python&quot; data-theme=&quot;github-light github-dark&quot;&gt;&lt;code data-language=&quot;python&quot; data-theme=&quot;github-light github-dark&quot; style=&quot;display: grid;&quot;&gt;&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;import&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; asyncio&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;import&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; hashlib&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt; &lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;import&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; ipdb&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;from&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; bleak &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;import&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; BleakScanner&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;import&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; mido&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt; &lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt; &lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;NUM_CCS&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; =&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt; 8&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;BASE_CC&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; =&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt; 70&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt; &lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;MIN_RSSI&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; =&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; 0x&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;30&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;MAX_RSSI&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; =&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; 0x&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;60&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt; &lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;def&lt;/span&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt; clamp&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;(lo, hi, x):&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;    if&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; x &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;&amp;#x3C;&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; lo:&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;        return&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; lo&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;    elif&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; x &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;&gt;&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; hi:&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;        return&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; hi&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;    else&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;:&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;        return&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; x&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt; &lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;def&lt;/span&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt; scale&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;(from_lo, from_hi, to_lo, to_hi, x):&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;    return&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; (clamp(from_lo, from_hi, x) &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; from_lo) &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;/&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; (from_hi &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; from_lo) &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; (to_hi &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; to_lo) &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; to_lo&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt; &lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;def&lt;/span&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt; rssi_to_midi&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;(rssi):&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;    return&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt; round&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;(scale(&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;MIN_RSSI&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;MAX_RSSI&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;127&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;abs&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;(rssi)))&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt; &lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;def&lt;/span&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt; valid_ad&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;(dev, ad):&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;    return&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; dev.name &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;is&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; not&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt; None&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; and&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; \\&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;           dev.name.startswith(&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt;&#039;Jessie&#039;&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;and&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; \\&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;           ad.rssi &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;is&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; not&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt; None&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; and&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; \\&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;           (ad.tx_power &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;is&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt; None&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; or&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; ad.tx_power &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;&amp;#x3C;&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt; 50&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;)&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt; &lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;def&lt;/span&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt; update_cc&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;(port, cc, val):&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;    port.send(mido.Message(&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt;&#039;control_change&#039;&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;--shiki-light:#E36209;--shiki-dark:#FFAB70&quot;&gt;control&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;cc, &lt;/span&gt;&lt;span style=&quot;--shiki-light:#E36209;--shiki-dark:#FFAB70&quot;&gt;value&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;val))&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt; &lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;async&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; def&lt;/span&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt; main&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;():&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;    port &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; mido.open_output()&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;    cc_nums &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; {}&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;    async&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; with&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; BleakScanner() &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;as&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; scanner:&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;        async&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; for&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; bd, ad &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;in&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; scanner.advertisement_data():&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;            if&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; not&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; valid_ad(bd, ad):&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;                continue&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;            if&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; bd.address &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;not&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; in&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; cc_nums:&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;                if&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt; len&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;(cc_nums) &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;&amp;#x3C;&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt; NUM_CCS&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;:&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;                    cc_nums[bd.address] &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt; BASE_CC&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; +&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt; len&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;(cc_nums)&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;                else&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;:&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;                    continue&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt; &lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;            val &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; rssi_to_midi(ad.rssi &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt; (ad.tx_power &lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;or&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt; 8&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;))&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;            print&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;f&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;bd.name&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;}&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; -&gt; &lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;val&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;}&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;)&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;            update_cc(port, cc_nums[bd.address], val)&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt; &lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt; &lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt; __name__&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; ==&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; &#039;__main__&#039;&lt;/span&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;:&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#24292E;--shiki-dark:#E1E4E8&quot;&gt;    asyncio.run(main())&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;\n&lt;p&gt;if i/we work on it any more, i’ll put it in a repo somewhere&lt;/p&gt;"},"posts/i-think-i'm-beginning-to-recover":{"title":"i think i'm beginning to recover","links":[],"tags":[],"content":"by the end of the third year of my phd program, i was beginning to show external signs of hitting my stride: nearly finishing my course requirements, having a first-author paper accepted at a major conference, generating my own promising (if meager) research ideas. but internally, i was a trainwreck. i spent most days in the office doing nothing but doomscrolling. the very thought of opening up my in-progress proofs or writing some inference rules on the whiteboard spiked my anxiety to such an extent that the ensuing headache made work all but impossible anyway.\nmaybe it was my grandiose expectations of myself conflicting with my lack of field-redefining work. maybe it was covid’s isolation that prevented me from picking up good grad student habits by osmosis. maybe it was the weight of my increasing disillusion that tech could ever do any good in the world. maybe it was just burnout.\nmy varied attempts to fix the situation while continuing to come to school each day had failed, so i knew i needed something else. i took leave.\n\nhalf a year later, i’m don’t think i’ve solved anything. but i have begun clawing something back: joy.\ni started my batch at the Recurse Center this week. everyone is excited about what they’re building and learning, and everyone is excited by everyone else. no one interrupts a presentation to ask, “didn’t Robin Milner solve this in the 80s?”\ni’m building things that have been built before. i’m learning things for my sake. i’m believing that tech can be neat. i’m regaining control over my mind.\ni don’t expect RC to be a cure-all. a loving community is a pretty good start, though.","richContent":"&lt;p&gt;by the end of the third year of my phd program, i was beginning to show external signs of hitting my stride: nearly finishing my course requirements, having a first-author paper accepted at a major conference, generating my own promising (if meager) research ideas. but internally, i was a trainwreck. i spent most days in the office doing nothing but doomscrolling. the very thought of opening up my in-progress proofs or writing some inference rules on the whiteboard spiked my anxiety to such an extent that the ensuing headache made work all but impossible anyway.&lt;/p&gt;\n&lt;p&gt;maybe it was my grandiose expectations of myself conflicting with my lack of field-redefining work. maybe it was covid’s isolation that prevented me from picking up good grad student habits by osmosis. maybe it was the weight of my increasing disillusion that tech could ever do any good in the world. maybe it was just burnout.&lt;/p&gt;\n&lt;p&gt;my varied attempts to fix the situation while continuing to come to school each day had failed, so i knew i needed something else. i took leave.&lt;/p&gt;\n&lt;hr&gt;\n&lt;p&gt;half a year later, i’m don’t think i’ve &lt;em&gt;solved&lt;/em&gt; anything. but i have begun clawing something back: joy.&lt;/p&gt;\n&lt;p&gt;i started my batch at the &lt;a href=&quot;https://www.recurse.com&quot; class=&quot;external&quot;&gt;Recurse Center&lt;svg aria-hidden=&quot;true&quot; class=&quot;external-icon&quot; viewBox=&quot;0 0 512 512&quot;&gt;&lt;path d=&quot;M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt; this week. &lt;em&gt;everyone&lt;/em&gt; is excited about what they’re building and learning, and &lt;em&gt;everyone&lt;/em&gt; is excited by everyone else. no one interrupts a presentation to ask, “didn’t Robin Milner solve this in the 80s?”&lt;/p&gt;\n&lt;p&gt;i’m building things that have been built before. i’m learning things for my sake. i’m believing that tech can be neat. i’m regaining control over my mind.&lt;/p&gt;\n&lt;p&gt;i don’t expect RC to be a cure-all. a loving community is a pretty good start, though.&lt;/p&gt;"},"projects/aes67-receiver":{"title":"aes67 receiver","links":[],"tags":[],"content":"RasPi-based prototype\nHardware\n\nRaspberry Pi Compute Module 4, which has an Ethernet MAC that supports the necessary timestamping for IEEE 1588\n\nthe 1GB RAM, 8GB eMMC, no wifi variant.\n\n\nWaveshare CM4-NANO-B carrier board, which has both an Ethernet port and an audio jack (just driven off of the Pi’s PWM, so surely shitty audio, but good enough for testing).\n\nSoftware\nUsing Pipewire’s preliminary AES67 support.\nSetting up the Pi\nUse the Raspberry Pi OS Lite image; I used specifically the 32-bit July 4th 2024 build (should I have used a 64-bit build?). If the Pi eMMC is empty (as it is the first time you connect it), it will show up as a USB mass storage device immediately. However, once you flash something, you need to use the rpiboot utility from the raspi usbboot repo in order to get it to show up as a mass storage device, even once you switch the CM4-NANO-B into boot mode. Add an empty “ssh” file and a “userconf” file with contents user:$(echo pass | openssl passwd -6 -stdin) to the boot volume (if you do this before ever booting you won’t need to use the rpiboot utility). mDNS is enabled for hostname raspberrypi by default.\nTo enable the shitty PWM-based audio, adapting from the wiki page for the carrier board, add dtoverlay=audremap,pins_18_19 to the bottom of /boot/firmware/config.txt (ensure that dtparam=audio=on is already there; if not, add it). Reboot. Test it with aplay -L to confirm “bcm2835 headphones” is listed as a card, then plug in some headphones and play a wav with aplay foo.wav.\nSetting up Pipewire\nWe need a fairly recent Pipewire (at least, say, 1.2), beyond that which is available in Bookworm, the version of Debian that the Raspberry Pi OS I’m using is based on. So we need to use the version from bookworm-backports, first adding the Debian signing key since it’s different from Raspbian’s:\nwget ftp-master.debian.org/keys/archive-key-12.asc\nsudo mv archive-key-12.asc /etc/apt/trusted.gpg.d/debian-bookworm-archive.asc\necho deb deb.debian.org/debian bookworm-backports main | sudo tee /etc/apt/sources.list.d/backports.list\nsudo apt update\nsudo apt install -t bookworm-backports pipewire\nWe need to set up ptp4l to do timesyncing. For now we don’t have any other possible grandmasters on the network, so we’ll keep the default config that allows the Pi to act as grandmaster.\nsudo apt install linuxptp\necho &#039;KERNEL==&quot;ptp[0-9]*&quot;, MODE=&quot;0644&quot;&#039; | sudo tee /etc/udev/rules.d/90-pipewire-aes67-ptp.rules\nsudo systemctl enable --now ptp4l@eth0.service\nThen to set up Pipewire’s actual AES67 support:\ncd /usr/share/pipewire\nsudo cp pipewire-aes67.conf pipewire.conf\n# Comment out the AES67 source for now. We&#039;ll start by testing the sink.\nsudo vim /usr/share/pipewire.conf\nhmm","richContent":"&lt;h1 id=&quot;raspi-based-prototype&quot;&gt;RasPi-based prototype&lt;a role=&quot;anchor&quot; aria-hidden tabindex=&quot;-1&quot; data-no-popover href=&quot;#raspi-based-prototype&quot; class=&quot;internal&quot;&gt;&lt;svg width=&quot;18&quot; height=&quot;18&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; stroke-width=&quot;2&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot;&gt;&lt;path d=&quot;M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h1&gt;\n&lt;h2 id=&quot;hardware&quot;&gt;Hardware&lt;a role=&quot;anchor&quot; aria-hidden tabindex=&quot;-1&quot; data-no-popover href=&quot;#hardware&quot; class=&quot;internal&quot;&gt;&lt;svg width=&quot;18&quot; height=&quot;18&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; stroke-width=&quot;2&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot;&gt;&lt;path d=&quot;M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;Raspberry Pi Compute Module 4, which has an Ethernet MAC that supports the necessary timestamping for IEEE 1588\n&lt;ul&gt;\n&lt;li&gt;the 1GB RAM, 8GB eMMC, no wifi variant.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://www.waveshare.com/wiki/CM4-NANO-B&quot; class=&quot;external&quot;&gt;Waveshare CM4-NANO-B&lt;svg aria-hidden=&quot;true&quot; class=&quot;external-icon&quot; viewBox=&quot;0 0 512 512&quot;&gt;&lt;path d=&quot;M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt; carrier board, which has both an Ethernet port and an audio jack (just driven off of the Pi’s PWM, so surely shitty audio, but good enough for testing).&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2 id=&quot;software&quot;&gt;Software&lt;a role=&quot;anchor&quot; aria-hidden tabindex=&quot;-1&quot; data-no-popover href=&quot;#software&quot; class=&quot;internal&quot;&gt;&lt;svg width=&quot;18&quot; height=&quot;18&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; stroke-width=&quot;2&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot;&gt;&lt;path d=&quot;M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h2&gt;\n&lt;p&gt;Using &lt;a href=&quot;https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/AES67&quot; class=&quot;external&quot;&gt;Pipewire’s preliminary AES67 support&lt;svg aria-hidden=&quot;true&quot; class=&quot;external-icon&quot; viewBox=&quot;0 0 512 512&quot;&gt;&lt;path d=&quot;M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;.&lt;/p&gt;\n&lt;h3 id=&quot;setting-up-the-pi&quot;&gt;Setting up the Pi&lt;a role=&quot;anchor&quot; aria-hidden tabindex=&quot;-1&quot; data-no-popover href=&quot;#setting-up-the-pi&quot; class=&quot;internal&quot;&gt;&lt;svg width=&quot;18&quot; height=&quot;18&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; stroke-width=&quot;2&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot;&gt;&lt;path d=&quot;M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;\n&lt;p&gt;Use the Raspberry Pi OS Lite image; I used specifically &lt;a href=&quot;https://downloads.raspberrypi.com/raspios_lite_armhf/images/raspios_lite_armhf-2024-07-04/2024-07-04-raspios-bookworm-armhf-lite.img.xz&quot; class=&quot;external&quot;&gt;the 32-bit July 4th 2024 build&lt;svg aria-hidden=&quot;true&quot; class=&quot;external-icon&quot; viewBox=&quot;0 0 512 512&quot;&gt;&lt;path d=&quot;M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt; (should I have used a 64-bit build?). If the Pi eMMC is empty (as it is the first time you connect it), it will show up as a USB mass storage device immediately. However, once you flash something, you need to use the &lt;a href=&quot;https://github.com/raspberrypi/usbboot&quot; class=&quot;external&quot;&gt;rpiboot utility from the raspi usbboot repo&lt;svg aria-hidden=&quot;true&quot; class=&quot;external-icon&quot; viewBox=&quot;0 0 512 512&quot;&gt;&lt;path d=&quot;M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt; in order to get it to show up as a mass storage device, even once you switch the CM4-NANO-B into boot mode. &lt;a href=&quot;https://www.raspberrypi.com/documentation/computers/configuration.html#remote-access&quot; class=&quot;external&quot;&gt;Add an empty “ssh” file and a “userconf” file with contents &lt;code&gt;user:$(echo pass | openssl passwd -6 -stdin)&lt;/code&gt;&lt;svg aria-hidden=&quot;true&quot; class=&quot;external-icon&quot; viewBox=&quot;0 0 512 512&quot;&gt;&lt;path d=&quot;M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt; to the boot volume (if you do this before ever booting you won’t need to use the rpiboot utility). mDNS is enabled for hostname &lt;code&gt;raspberrypi&lt;/code&gt; by default.&lt;/p&gt;\n&lt;p&gt;To enable the shitty PWM-based audio, adapting from &lt;a href=&quot;https://www.waveshare.com/wiki/CM4-NANO-B#Audio_Jack&quot; class=&quot;external&quot;&gt;the wiki page for the carrier board&lt;svg aria-hidden=&quot;true&quot; class=&quot;external-icon&quot; viewBox=&quot;0 0 512 512&quot;&gt;&lt;path d=&quot;M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;, add &lt;code&gt;dtoverlay=audremap,pins_18_19&lt;/code&gt; to the bottom of &lt;code&gt;/boot/firmware/config.txt&lt;/code&gt; (ensure that &lt;code&gt;dtparam=audio=on&lt;/code&gt; is already there; if not, add it). Reboot. Test it with &lt;code&gt;aplay -L&lt;/code&gt; to confirm “bcm2835 headphones” is listed as a card, then plug in some headphones and play a wav with &lt;code&gt;aplay foo.wav&lt;/code&gt;.&lt;/p&gt;\n&lt;h3 id=&quot;setting-up-pipewire&quot;&gt;Setting up Pipewire&lt;a role=&quot;anchor&quot; aria-hidden tabindex=&quot;-1&quot; data-no-popover href=&quot;#setting-up-pipewire&quot; class=&quot;internal&quot;&gt;&lt;svg width=&quot;18&quot; height=&quot;18&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; stroke-width=&quot;2&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot;&gt;&lt;path d=&quot;M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h3&gt;\n&lt;p&gt;We need a fairly recent Pipewire (at least, say, 1.2), beyond that which is available in Bookworm, the version of Debian that the Raspberry Pi OS I’m using is based on. So we need to use the version from bookworm-backports, first adding the Debian signing key since it’s different from Raspbian’s:&lt;/p&gt;\n&lt;figure data-rehype-pretty-code-figure=&quot;&quot;&gt;&lt;pre tabindex=&quot;0&quot; data-language=&quot;sh&quot; data-theme=&quot;github-light github-dark&quot;&gt;&lt;code data-language=&quot;sh&quot; data-theme=&quot;github-light github-dark&quot; style=&quot;display: grid;&quot;&gt;&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt;wget&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; https://ftp-master.debian.org/keys/archive-key-12.asc&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt;sudo&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; mv&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; archive-key-12.asc&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; /etc/apt/trusted.gpg.d/debian-bookworm-archive.asc&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;echo&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; deb&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; http://deb.debian.org/debian&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; bookworm-backports&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; main&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; |&lt;/span&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt; sudo&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; tee&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; /etc/apt/sources.list.d/backports.list&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt;sudo&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; apt&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; update&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt;sudo&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; apt&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; install&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt; -t&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; bookworm-backports&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; pipewire&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;\n&lt;p&gt;We need to set up ptp4l to do timesyncing. For now we don’t have any other possible grandmasters on the network, so we’ll keep the default config that allows the Pi to act as grandmaster.&lt;/p&gt;\n&lt;figure data-rehype-pretty-code-figure=&quot;&quot;&gt;&lt;pre tabindex=&quot;0&quot; data-language=&quot;sh&quot; data-theme=&quot;github-light github-dark&quot;&gt;&lt;code data-language=&quot;sh&quot; data-theme=&quot;github-light github-dark&quot; style=&quot;display: grid;&quot;&gt;&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt;sudo&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; apt&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; install&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; linuxptp&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;echo&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; &#039;KERNEL==&quot;ptp[0-9]*&quot;, MODE=&quot;0644&quot;&#039;&lt;/span&gt;&lt;span style=&quot;--shiki-light:#D73A49;--shiki-dark:#F97583&quot;&gt; |&lt;/span&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt; sudo&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; tee&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; /etc/udev/rules.d/90-pipewire-aes67-ptp.rules&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt;sudo&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; systemctl&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; enable&lt;/span&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt; --now&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; ptp4l@eth0.service&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;\n&lt;p&gt;Then to set up Pipewire’s actual AES67 support:&lt;/p&gt;\n&lt;figure data-rehype-pretty-code-figure=&quot;&quot;&gt;&lt;pre tabindex=&quot;0&quot; data-language=&quot;sh&quot; data-theme=&quot;github-light github-dark&quot;&gt;&lt;code data-language=&quot;sh&quot; data-theme=&quot;github-light github-dark&quot; style=&quot;display: grid;&quot;&gt;&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#005CC5;--shiki-dark:#79B8FF&quot;&gt;cd&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; /usr/share/pipewire&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt;sudo&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; cp&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; pipewire-aes67.conf&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; pipewire.conf&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#6A737D;--shiki-dark:#6A737D&quot;&gt;# Comment out the AES67 source for now. We&#039;ll start by testing the sink.&lt;/span&gt;&lt;/span&gt;\n&lt;span data-line=&quot;&quot;&gt;&lt;span style=&quot;--shiki-light:#6F42C1;--shiki-dark:#B392F0&quot;&gt;sudo&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; vim&lt;/span&gt;&lt;span style=&quot;--shiki-light:#032F62;--shiki-dark:#9ECBFF&quot;&gt; /usr/share/pipewire.conf&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;\n&lt;p&gt;hmm&lt;/p&gt;"},"projects/miscellanea/Zoom-G1Xon-control":{"title":"Zoom G1Xon control","links":[],"tags":[],"content":"these are notes from a project zero and i did to control the Zoom G1Xon guitar multi-effects pedal in real-time over USB.\nthere are various pieces of software to edit and store patches for Zoom pedals, but they’re not so great for real-time control. nonetheless, they contain lots of useful information. we got most of ours from this wonderful project page and some of the code linked from the home page of that wiki. the B1on is moooooostly the same as the G1Xon.\nthe pedal communicates with a USB host using MIDI SysEx and CC messages. as documented on that wiki page, most of the SysEx commands require a model ID specific to the pedal; while the B1on’s is 0x65, the G1Xon’s is 0x64. (you can find this out with the “Identify” command.) oddly, we found that some commands work with the incorrect model ID in the command, while others do not, so if you are having trouble with inconsistency, make sure you’re using the right model ID everywhere.\nwhen trying to receive data back from the pedal (whether for the Identify command, the Get(Current)Patch commands, or when receiving patch fragments when making changes on-device), make sure that you have enabled receiving SysEx messages with whatever midi driver you are using; rtmidi, for example, filters them out by default. (zero brought up this possibility when i was stumped.)\nyou need to turn on edit mode before doing much stuff, including before the pedal will send values back when edited on-device.\nfor our purposes, the most useful commands are those labeled FXM_OnOff and FXM_PN. the former enables/disables pedals and the latter changes pedals’ parameters. stripped of the SysEx header/footer, the latter message looks like this:\n52 00 64 31 ${pedalIndex} ${paramIndex} ${paramValueLow} ${paramValueHigh}\n\nhere, pedalIndex is the 0-indexed index of the pedal within the effects chain, paramIndex is the… 2(?)-indexed index of the parameter within the specific pedal, paramValueLow is the low 7 bits of the value, and paramValueHigh is the high 7 bits of the value. we found that the paramValue maps exactly onto the value shown on the device—there’s no hidden extra precision—so if a value is 0-100 on the device, you send 0-100.\nthe values/sliders/dials on the device’s display update in real-time when sending new parameter values, even for effects that normally can’t be edited on-device. it’s cute to see some of the little dials spin!","richContent":"&lt;p&gt;these are notes from a project zero and i did to control the Zoom G1Xon guitar multi-effects pedal in real-time over USB.&lt;/p&gt;\n&lt;p&gt;there are various pieces of software to edit and store patches for Zoom pedals, but they’re not so great for real-time control. nonetheless, they contain lots of useful information. we got most of ours from &lt;a href=&quot;https://github.com/shooking/ZoomPedalFun/wiki/De-re-B1On&quot; class=&quot;external&quot;&gt;this wonderful project page&lt;svg aria-hidden=&quot;true&quot; class=&quot;external-icon&quot; viewBox=&quot;0 0 512 512&quot;&gt;&lt;path d=&quot;M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt; and some of the code linked from the home page of that wiki. the B1on is moooooostly the same as the G1Xon.&lt;/p&gt;\n&lt;p&gt;the pedal communicates with a USB host using MIDI SysEx and CC messages. as documented on that wiki page, most of the SysEx commands require a model ID specific to the pedal; while the B1on’s is 0x65, the G1Xon’s is 0x64. (you can find this out with the “Identify” command.) oddly, we found that some commands work with the incorrect model ID in the command, while others do not, so if you are having trouble with inconsistency, make sure you’re using the right model ID everywhere.&lt;/p&gt;\n&lt;p&gt;when trying to receive data back from the pedal (whether for the Identify command, the Get(Current)Patch commands, or when receiving patch fragments when making changes on-device), make sure that you have enabled receiving SysEx messages with whatever midi driver you are using; rtmidi, for example, filters them out by default. (zero brought up this possibility when i was stumped.)&lt;/p&gt;\n&lt;p&gt;you need to turn on edit mode before doing much stuff, including before the pedal will send values back when edited on-device.&lt;/p&gt;\n&lt;p&gt;for our purposes, the most useful commands are those labeled FXM_OnOff and FXM_PN. the former enables/disables pedals and the latter changes pedals’ parameters. stripped of the SysEx header/footer, the latter message looks like this:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;52 00 64 31 ${pedalIndex} ${paramIndex} ${paramValueLow} ${paramValueHigh}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;here, &lt;code&gt;pedalIndex&lt;/code&gt; is the 0-indexed index of the pedal within the effects chain, &lt;code&gt;paramIndex&lt;/code&gt; is the… 2(?)-indexed index of the parameter within the specific pedal, &lt;code&gt;paramValueLow&lt;/code&gt; is the low 7 bits of the value, and &lt;code&gt;paramValueHigh&lt;/code&gt; is the high 7 bits of the value. we found that the &lt;code&gt;paramValue&lt;/code&gt; maps exactly onto the value shown on the device—there’s no hidden extra precision—so if a value is 0-100 on the device, you send 0-100.&lt;/p&gt;\n&lt;p&gt;the values/sliders/dials on the device’s display update in real-time when sending new parameter values, even for effects that normally can’t be edited on-device. it’s cute to see some of the little dials spin!&lt;/p&gt;"},"projects/miscellanea/crashing-waves":{"title":"crashing waves","links":[],"tags":[],"content":"i built this in an RC creative coding session; the prompt was “what a wonderful world.”\nmess with a parameter to get the sound to start:\n","richContent":"&lt;p&gt;i built this in an RC creative coding session; the prompt was “what a wonderful world.”&lt;/p&gt;\n&lt;p&gt;mess with a parameter to get the sound to start:&lt;/p&gt;\n&lt;iframe width=&quot;500&quot; height=&quot;800&quot; src=&quot;https://jessie.grosen.systems/online-experiments/crashing-waves/&quot;&gt;&lt;/iframe&gt;"},"projects/mta-projection":{"title":"mta projection","links":[],"tags":[],"content":"\nlink to project\nwhy is a map different from a diagram? i recently heard the MTA’s typical subway map described as a bit of a misnomer, because its lack of strict adherence to physical layout instead makes it a diagram.\n\nwhat if we stubbornly held that this is, in fact, a map? there are lots of different types of maps of the same underlying earth—not just displaying different information (streets, topography, buildings), but different projections as well. the subway map does display our earthly terrain, but under a rather unorthodox projection.\nhow might we better understand this projection? by viewing satellite imagery of the city under it. i built this project to do that—hit the “transform!” button to see the mercator projection morph into the MTA projection.\nTODO\n\n fix across some more browsers (scaling seems like it has some issues in chrome among others?)\n beautify a bit\n maybe add a bit of dynamism even when not actively transforming\n","richContent":"&lt;iframe width=&quot;400&quot; height=&quot;500&quot; src=&quot;https://jessie.grosen.systems/mta-projection/&quot;&gt;&lt;/iframe&gt;\n&lt;p&gt;&lt;a href=&quot;https://jessie.grosen.systems/mta-projection/&quot; class=&quot;external&quot;&gt;link to project&lt;svg aria-hidden=&quot;true&quot; class=&quot;external-icon&quot; viewBox=&quot;0 0 512 512&quot;&gt;&lt;path d=&quot;M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;why is a &lt;em&gt;map&lt;/em&gt; different from a &lt;em&gt;diagram&lt;/em&gt;? i recently heard the MTA’s typical subway map described as a bit of a misnomer, because its lack of strict adherence to physical layout instead makes it a diagram.&lt;/p&gt;\n&lt;p&gt;&lt;img src=&quot;../public-media/mta_subway_map.png&quot; width=&quot;400&quot; height=&quot;auto&quot; alt=&quot;&quot;&gt;&lt;/p&gt;\n&lt;p&gt;what if we stubbornly held that this is, in fact, a map? there are lots of different types of maps of the same underlying earth—not just displaying different information (streets, topography, buildings), but different &lt;em&gt;projections&lt;/em&gt; as well. the subway map does display our earthly terrain, but under a rather unorthodox projection.&lt;/p&gt;\n&lt;p&gt;how might we better understand this projection? by viewing satellite imagery of the city under it. i built this project to do that—hit the “transform!” button to see the mercator projection morph into the MTA projection.&lt;/p&gt;\n&lt;h2 id=&quot;todo&quot;&gt;TODO&lt;a role=&quot;anchor&quot; aria-hidden tabindex=&quot;-1&quot; data-no-popover href=&quot;#todo&quot; class=&quot;internal&quot;&gt;&lt;svg width=&quot;18&quot; height=&quot;18&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; stroke-width=&quot;2&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot;&gt;&lt;path d=&quot;M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/h2&gt;\n&lt;ul class=&quot;contains-task-list&quot;&gt;\n&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; disabled&gt; fix across some more browsers (scaling seems like it has some issues in chrome among others?)&lt;/li&gt;\n&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; disabled&gt; beautify a bit&lt;/li&gt;\n&lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; disabled&gt; maybe add a bit of dynamism even when not actively transforming&lt;/li&gt;\n&lt;/ul&gt;"},"talks/mustard-watches":{"title":"mustard watches","links":[],"tags":[],"content":"\ni gave a short talk on y j ringard’s famous 1990 paper “mustard watches: an integrated approach to time and food” at cmu plunch on march 4, 2022. i covered both the material in the original paper and some of the developments that have happened since. the slides follow:\n","richContent":"&lt;p&gt;&lt;img src=&quot;../public-media/IMG_1570.jpeg&quot; width=&quot;400&quot; height=&quot;auto&quot; alt=&quot;&quot;&gt;&lt;/p&gt;\n&lt;p&gt;i gave a short talk on y j ringard’s famous 1990 paper “mustard watches: an integrated approach to time and food” at cmu plunch on march 4, 2022. i covered both the material in the original paper and some of the developments that have happened since. the slides follow:&lt;/p&gt;\n&lt;p&gt;&lt;iframe src=&quot;../public-media/mustard-watches.pdf&quot; class=&quot;pdf&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;"}}